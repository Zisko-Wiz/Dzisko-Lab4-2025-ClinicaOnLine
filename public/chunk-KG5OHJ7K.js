import{a as O}from"./chunk-B2KEHLRQ.js";import{o as E}from"./chunk-VVHVM3U3.js";import{a as k}from"./chunk-6T6KKZPT.js";import{f as x,g as I}from"./chunk-NYLRLJZA.js";import{Da as a,Hb as r,Ia as c,Ib as C,Oa as f,Va as h,aa as p,ba as v,bb as u,cb as m,ib as o,jb as i,kb as b,ob as S,sb as _,tb as g}from"./chunk-RZXA2LSZ.js";import{i as d}from"./chunk-ODN5LVDJ.js";function y(t,e){t&1&&(o(0,"li",3)(1,"button",7),r(2,"Usuarios"),i()())}function P(t,e){t&1&&(o(0,"li",3)(1,"button",8),r(2,"Pacientes"),i()())}function U(t,e){if(t&1){let n=S();o(0,"li",3)(1,"button",4),_("click",function(){p(n);let l=g();return v(l.logOut())}),r(2,"Salir"),i()(),o(3,"li",3)(4,"button",5),r(5,"Mi Perfil"),i()(),o(6,"li",3)(7,"button",6),r(8,"Turnos"),i()(),u(9,y,3,0,"li",3)(10,P,3,0,"li",3)}if(t&2){let n=g();a(9),m(n.signInService.userRole=="administrador"?9:n.signInService.userRole=="especialista"?10:-1)}}function w(t,e){t&1&&(o(0,"li",3)(1,"button",9),r(2,"Ingresar"),i()(),o(3,"li",3)(4,"button",10),r(5,"Registrarse"),i()())}var M=class t{constructor(e,n,s){this.router=e;this.supa=n;this.signInService=s}ingreso=!1;mensajeBienvenida="Bienvenido a la Cl\xEDnica OnLine";subscription;logginEmmiter=new h;ngOnInit(){this.signInService.especialidades="",this.getUser(),this.signInService.getUser().then(()=>{this.signInService.getUsuario().then(()=>{this.signInService.getEspecialidades().then(()=>{this.signInService.getHorarios().then(()=>{this.signInService.getAvatarUrl()})})})})}ngOnDestroy(){this.subscription.unsubscribe(),this.signInService.especialidades=""}logOut(){return d(this,null,function*(){this.supa.supabase.auth.signOut().then(({error:e})=>{e?console.error("Error: ",e.message):(this.signInService.getUser(),this.ingreso=!1,this.mensajeBienvenida="",this.signInService.especialidades="",this.router.navigate(["home"]))})})}getUser(){this.subscription=this.signInService.emitter.subscribe({next:e=>{e!=null&&(this.ingreso=!0)}})}setWelcomeMessage(){return d(this,null,function*(){if(this.signInService.user!=null){let{data:e,error:n}=yield this.supa.supabase.from("users").select("nickname").eq("uid",this.signInService.user?.id),s=e[0].nickname,l=s[0].toUpperCase()+s.slice(1);this.mensajeBienvenida="Bienvenido "+l}})}static \u0275fac=function(n){return new(n||t)(c(x),c(k),c(O))};static \u0275cmp=f({type:t,selectors:[["app-header"]],decls:12,vars:2,consts:[[1,"container"],["src","hospital.png","alt","logo",1,"logo",2,"float","left"],["routerLink","/home"],[2,"float","right"],[3,"click"],["routerLink","/mi-perfil"],["routerLink","/turnos"],["routerLink","/usuarios"],["routerLink","/pacientes"],["routerLink","/ingreso"],["routerLink","/registro"]],template:function(n,s){n&1&&(o(0,"div",0)(1,"ul")(2,"li"),b(3,"img",1),i(),o(4,"li")(5,"button",2),r(6,"P\xE1gina principal"),i()(),o(7,"li")(8,"h1"),r(9),i()(),u(10,U,11,1)(11,w,6,0),i()()),n&2&&(a(9),C(s.mensajeBienvenida),a(),m(s.ingreso?10:11))},dependencies:[E,I],styles:[".container[_ngcontent-%COMP%]{position:sticky;top:0;z-index:5000}ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0;overflow:hidden;background-color:#333}li[_ngcontent-%COMP%]{float:left}li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;color:#21c4b6;background-color:#333;text-align:center;padding:2vh 5vi;text-decoration:none;border:none}li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#111}li[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:block;color:#21c4b6;font-size:100%;text-align:center;padding-top:2vh;margin:0}.logo[_ngcontent-%COMP%]{object-fit:contain;width:100%;height:6vh;-webkit-user-select:none;user-select:none}"]})};export{M as a};
