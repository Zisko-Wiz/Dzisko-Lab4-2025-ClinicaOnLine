import{l as P,n as m}from"./chunk-XU3WWRKM.js";import{Aa as y,Ba as I,C as b,F as h,I as S,J as C,Oa as s,Pa as M,Z as v,ba as a,ea as c,ja as l,mb as k,nb as E,pa as _,qa as x,va as r,wa as n,xa as p,ya as O}from"./chunk-XE42GBLL.js";import"./chunk-LJ5XHLMQ.js";import{h as f}from"./chunk-FK42CRUA.js";var u=class i{constructor(e){this.supaService=e}isLogged=!1;user;emitter=new l;getUser(){this.supaService.supabase.auth.getUser().then(({data:e})=>{e.user!=null?(this.user=e.user,this.isLogged=!0,this.emitter.emit(e.user)):(this.isLogged=!1,this.emitter.emit(void 0))})}static \u0275fac=function(t){return new(t||i)(h(m))};static \u0275prov=b({token:i,factory:i.\u0275fac,providedIn:"root"})};function B(i,e){if(i&1){let t=O();r(0,"li",2)(1,"button",3),y("click",function(){S(t);let g=I();return C(g.logOut())}),s(2,"Salir"),n()(),r(3,"li",4)(4,"button"),s(5,"Mi Perfil"),n()()}}function L(i,e){i&1&&(r(0,"li",2)(1,"button"),s(2,"Ingresar"),n()(),r(3,"li",2)(4,"button",5),s(5,"Registrarse"),n()())}var d=class i{constructor(e,t,o){this.router=e;this.supa=t;this.signInService=o}ingreso=!1;mensajeBienvenida="Bienvenido a la Cl\xEDnica OnLine";subscription;logginEmmiter=new l;ngOnInit(){this.getUser(),this.signInService.getUser()}ngOnDestroy(){this.subscription.unsubscribe()}logOut(){return f(this,null,function*(){this.supa.supabase.auth.signOut().then(({error:e})=>{e?console.error("Error: ",e.message):(this.signInService.getUser(),this.ingreso=!1,this.mensajeBienvenida="")})})}getUser(){this.subscription=this.signInService.emitter.subscribe({next:e=>{e!=null&&(this.ingreso=!0,this.setWelcomeMessage())}})}setWelcomeMessage(){return f(this,null,function*(){if(this.signInService.user!=null){let{data:e,error:t}=yield this.supa.supabase.from("users").select("nickname").eq("uid",this.signInService.user?.id),o=e[0].nickname,g=o[0].toUpperCase()+o.slice(1);this.mensajeBienvenida="Bienvenido "+g}})}static \u0275fac=function(t){return new(t||i)(a(k),a(m),a(u))};static \u0275cmp=c({type:i,selectors:[["app-header"]],decls:12,vars:2,consts:[[1,"container"],["src","hospital.png","alt","logo",1,"logo",2,"float","left"],[2,"float","right"],[3,"click"],[2,"float","left"],["routerLink","/registro"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"ul")(2,"li"),p(3,"img",1),n(),r(4,"li")(5,"button"),s(6,"P\xE1gina principal"),n()(),r(7,"li")(8,"h1"),s(9),n()(),_(10,B,6,0)(11,L,6,0),n()()),t&2&&(v(9),M(o.mensajeBienvenida),v(),x(o.ingreso?10:11))},dependencies:[P,E],styles:[".container[_ngcontent-%COMP%]{position:sticky;top:0;z-index:5000}ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0;overflow:hidden;background-color:#333}li[_ngcontent-%COMP%]{float:left}li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;color:#21c4b6;background-color:#333;text-align:center;padding:2vh 5vi;text-decoration:none;border:none}li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#111}li[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:block;color:#21c4b6;font-size:100%;text-align:center;padding-top:2vh;margin:0}.logo[_ngcontent-%COMP%]{object-fit:contain;width:100%;height:6vh;-webkit-user-select:none;user-select:none}"]})};var U=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=c({type:i,selectors:[["app-home"]],decls:1,vars:0,template:function(t,o){t&1&&p(0,"app-header")},dependencies:[d],encapsulation:2})};export{U as Home};
