import{a as V,d as O,h as P,i as T,j as q,k as N,l as z,m as D,n as G,o as B}from"./chunk-UFL6QMOH.js";import{a as C,b as p,d as F,e as w,f as S,h,i as k,j as M,k as E,l as x,m as y,n as L}from"./chunk-4XUN7VXY.js";import"./chunk-LJ5XHLMQ.js";import{A as I,B as j}from"./chunk-SBXXUM2O.js";import{Ca as m,G as u,Ra as r,_ as l,fa as b,qa as c,qb as v,ra as s,rb as _,va as f,wa as e,xa as t,ya as g}from"./chunk-NKZF7QRB.js";import"./chunk-FK42CRUA.js";function R(o,n){o&1&&(e(0,"p",6),r(1,"*Correo o contrase\xF1a inv\xE1lidos"),t())}function H(o,n){o&1&&(e(0,"p",6),r(1,"*Cuenta no aprobada por administrador"),t())}function W(o,n){o&1&&(e(0,"p",6),r(1,"*Correo no confirmado"),t())}function J(o,n){o&1&&(e(0,"mat-error"),r(1,"Correo electr\xF3nico es "),e(2,"strong"),r(3,"obligatorio"),t()())}function K(o,n){o&1&&(e(0,"mat-error"),r(1,"Correo electr\xF3nico "),e(2,"strong"),r(3,"inv\xE1lido"),t()())}function Q(o,n){o&1&&(e(0,"mat-error"),r(1,"Contrase\xF1a es "),e(2,"strong"),r(3,"obligatoria"),t()())}function U(o,n){o&1&&(e(0,"mat-error"),r(1,"La contrase\xF1a debe tener m\xEDnimo 6 car\xE1cteres"),t())}var A=class o{supabaseService=u(L);router=u(v);error=!0;errorInvalido=!1;errorNoConfirmado=!1;verificated=null;loginForm=new S({email:new h("",[p.required,p.email]),password:new h("",[p.required,p.minLength(6)])});ngOnInit(){}getVerification(){this.supabaseService.supabase.from("users").select("verification").eq("email",this.loginForm.get("email")?.value).then(({data:n,error:a})=>{a?(console.log(a.message),console.log(a.code)):(this.verificated=n[0].verification,n[0].verification&&this.login())})}login(){this.supabaseService.supabase.auth.signInWithPassword({email:this.loginForm.get("email")?.value,password:this.loginForm.get("password")?.value}).then(({data:n,error:a})=>{if(this.errorInvalido=!1,this.errorNoConfirmado=!1,a)switch(console.log(a.code),a.code){case"email_not_confirmed":this.errorNoConfirmado=!0;break;default:break;case"invalid_credentials":this.errorInvalido=!0;break}else this.supabaseService.supabase.from("ingresos").insert([{usuario:n.user.email}]).then(({error:i})=>{i==null&&this.router.navigate(["/home"])})})}autofill(n){switch(n){case 1:this.loginForm.controls.email.setValue("gijozy@cyclelove.cc"),this.loginForm.controls.password.setValue("555555");break;case 2:this.loginForm.controls.email.setValue("nadoho1971@coasah.com"),this.loginForm.controls.password.setValue("666666");break;case 3:this.loginForm.controls.email.setValue("hulyne@forexzig.com"),this.loginForm.controls.password.setValue("777777");break;case 4:this.loginForm.controls.email.setValue("sibid45934@decodewp.com"),this.loginForm.controls.password.setValue("222222");break;case 5:this.loginForm.controls.email.setValue("zepafupi@fxzig.com"),this.loginForm.controls.password.setValue("333333");break;case 6:this.loginForm.controls.email.setValue("gagikah800@decodewp.com"),this.loginForm.controls.password.setValue("111111");break}this.loginForm.updateValueAndValidity()}ingresar(){this.getVerification()}static \u0275fac=function(a){return new(a||o)};static \u0275cmp=b({type:o,selectors:[["app-login"]],decls:35,vars:9,consts:[[1,"container"],[3,"ngSubmit","formGroup"],[1,"form-card"],[1,"row2"],["src","hospital.png",1,"logo"],[1,"col"],[1,"error"],[1,"full-width"],["matInput","","placeholder","Correo electr\xF3nico","formControlName","email"],["matInput","","type","password","placeholder","Contrase\xF1a","formControlName","password"],["type","button","id","cancel-btn","matButton","elevated","routerLink","/home"],[1,"submit-div"],["matButton","elevated","color","primary","type","submit",3,"disabled"],[1,"quick-acces"],["src","https://gehbvrlfgpqxvzcleahc.supabase.co/storage/v1/object/public/profile-pictures//gijozy-1.png",1,"img-btn",3,"click"],["src","https://gehbvrlfgpqxvzcleahc.supabase.co/storage/v1/object/public/profile-pictures//nadoho1971-1.png",1,"img-btn",3,"click"],["src","https://gehbvrlfgpqxvzcleahc.supabase.co/storage/v1/object/public/profile-pictures//hulyne-1.png",1,"img-btn",3,"click"],["src","https://gehbvrlfgpqxvzcleahc.supabase.co/storage/v1/object/public/profile-pictures//sibid45934-1.png",1,"img-btn",3,"click"],["src","https://gehbvrlfgpqxvzcleahc.supabase.co/storage/v1/object/public/profile-pictures//zepafupi-1.png",1,"img-btn",3,"click"],["src","https://gehbvrlfgpqxvzcleahc.supabase.co/storage/v1/object/public/profile-pictures//gagikah800-1.png",1,"img-btn",3,"click"]],template:function(a,i){a&1&&(e(0,"div",0)(1,"form",1),m("ngSubmit",function(){return i.ingresar()}),e(2,"mat-card",2)(3,"mat-card-header")(4,"mat-card-title"),r(5,"Ingresar"),t()(),e(6,"div",3),g(7,"img",4),t(),e(8,"mat-card-content")(9,"div",5),c(10,R,2,0,"p",6),c(11,H,2,0,"p",6),c(12,W,2,0,"p",6),e(13,"mat-form-field",7),g(14,"input",8),c(15,J,4,0,"mat-error"),c(16,K,4,0,"mat-error"),t()(),e(17,"div",5)(18,"mat-form-field",7),g(19,"input",9),c(20,Q,4,0,"mat-error"),c(21,U,2,0,"mat-error"),t()()(),e(22,"div",3)(23,"button",10),r(24,"Cancelar"),t(),e(25,"mat-card-actions",11)(26,"button",12),r(27,"Ingresar"),t()()()()()(),e(28,"div",13)(29,"img",14),m("click",function(){return i.autofill(1)}),t(),e(30,"img",15),m("click",function(){return i.autofill(2)}),t(),e(31,"img",16),m("click",function(){return i.autofill(3)}),t(),e(32,"img",17),m("click",function(){return i.autofill(4)}),t(),e(33,"img",18),m("click",function(){return i.autofill(5)}),t(),e(34,"img",19),m("click",function(){return i.autofill(6)}),t()()),a&2&&(l(),f("formGroup",i.loginForm),l(9),s(i.errorInvalido?10:-1),l(),s(i.verificated==!1?11:-1),l(),s(i.errorNoConfirmado?12:-1),l(3),s(i.loginForm.controls.email.hasError("required")?15:-1),l(),s(i.loginForm.controls.email.hasError("email")?16:-1),l(4),s(i.loginForm.controls.password.hasError("required")?20:-1),l(),s(i.loginForm.controls.password.hasError("minlength")?21:-1),l(5),f("disabled",!i.loginForm.valid))},dependencies:[T,P,O,V,j,I,B,q,D,z,G,N,y,k,C,F,w,M,E,_,x],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.form-card[_ngcontent-%COMP%]{min-width:120px;margin:20px auto;width:70vw}.mat-radio-button[_ngcontent-%COMP%]{display:block;margin:5px 0}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.col[_ngcontent-%COMP%]{flex:1;margin-right:20px}.col[_ngcontent-%COMP%]:last-child{margin-right:0}.submit-div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}#cancel-btn[_ngcontent-%COMP%]{width:8%}.row2[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;align-content:center;padding-top:5vh}.logo[_ngcontent-%COMP%]{width:20vw;aspect-ratio:auto;margin-bottom:2vh}.error[_ngcontent-%COMP%]{color:red}.quick-acces[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}.img-btn[_ngcontent-%COMP%]{width:10vw}"]})};export{A as Login};
