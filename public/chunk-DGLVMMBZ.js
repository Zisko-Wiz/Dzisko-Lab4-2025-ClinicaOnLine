import{a as O}from"./chunk-UX76GUPX.js";import{o as E}from"./chunk-7XGRIRYV.js";import{a as k}from"./chunk-3FX5JOZC.js";import{f as x,g as I}from"./chunk-5M3LTLOJ.js";import{Da as a,Hb as r,Ia as c,Ib as C,Oa as h,Va as f,aa as p,ba as v,bb as u,cb as m,ib as t,jb as i,kb as b,ob as S,sb as _,tb as g}from"./chunk-VLVEKFRY.js";import{i as d}from"./chunk-ODN5LVDJ.js";function P(n,e){n&1&&(t(0,"li",4)(1,"button",8),r(2,"Estad\xEDsticas"),i()(),t(3,"li",4)(4,"button",9),r(5,"Usuarios"),i()())}function y(n,e){n&1&&(t(0,"li",4)(1,"button",10),r(2,"Pacientes"),i()())}function w(n,e){if(n&1){let o=S();t(0,"li",4)(1,"button",5),_("click",function(){p(o);let l=g();return v(l.logOut())}),r(2,"Salir"),i()(),t(3,"li",4)(4,"button",6),r(5,"Mi Perfil"),i()(),t(6,"li",4)(7,"button",7),r(8,"Turnos"),i()(),u(9,P,6,0)(10,y,3,0,"li",4)}if(n&2){let o=g();a(9),m(o.signInService.userRole=="administrador"?9:o.signInService.userRole=="especialista"?10:-1)}}function L(n,e){n&1&&(t(0,"li",4)(1,"button",11),r(2,"Ingresar"),i()(),t(3,"li",4)(4,"button",12),r(5,"Registrarse"),i()())}var M=class n{constructor(e,o,s){this.router=e;this.supa=o;this.signInService=s}ingreso=!1;mensajeBienvenida="Bienvenido a la Cl\xEDnica OnLine";subscription;logginEmmiter=new f;ngOnInit(){this.signInService.especialidades="",this.getUser(),this.signInService.getUser().then(()=>{this.signInService.getUsuario().then(()=>{this.signInService.getEspecialidades().then(()=>{this.signInService.getHorarios().then(()=>{this.signInService.getAvatarUrl()})})})})}ngOnDestroy(){this.subscription.unsubscribe(),this.signInService.especialidades=""}logOut(){return d(this,null,function*(){this.supa.supabase.auth.signOut().then(({error:e})=>{e?console.error("Error: ",e.message):(this.signInService.getUser(),this.ingreso=!1,this.mensajeBienvenida="",this.signInService.especialidades="",this.router.navigate(["home"]))})})}getUser(){this.subscription=this.signInService.emitter.subscribe({next:e=>{e!=null&&(this.ingreso=!0)}})}setWelcomeMessage(){return d(this,null,function*(){if(this.signInService.user!=null){let{data:e,error:o}=yield this.supa.supabase.from("users").select("nickname").eq("uid",this.signInService.user?.id),s=e[0].nickname,l=s[0].toUpperCase()+s.slice(1);this.mensajeBienvenida="Bienvenido "+l}})}static \u0275fac=function(o){return new(o||n)(c(x),c(k),c(O))};static \u0275cmp=h({type:n,selectors:[["app-header"]],decls:12,vars:2,consts:[[1,"container"],["src","hospital.png","alt","logo",1,"logo",2,"float","left"],["id","home-btn"],["routerLink","/home"],[2,"float","right"],[3,"click"],["routerLink","/mi-perfil"],["routerLink","/turnos"],["routerLink","/estadisticas"],["routerLink","/usuarios"],["routerLink","/pacientes"],["routerLink","/ingreso"],["routerLink","/registro"]],template:function(o,s){o&1&&(t(0,"div",0)(1,"ul")(2,"li"),b(3,"img",1),i(),t(4,"li",2)(5,"button",3),r(6,"P\xE1gina principal"),i()(),t(7,"li")(8,"h1"),r(9),i()(),u(10,w,11,1)(11,L,6,0),i()()),o&2&&(a(9),C(s.mensajeBienvenida),a(),m(s.ingreso?10:11))},dependencies:[E,I],styles:[".container[_ngcontent-%COMP%]{position:sticky;top:0;z-index:5000}ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0;overflow:hidden;background-color:#333}li[_ngcontent-%COMP%]{float:left}li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;color:#21c4b6;background-color:#333;text-align:center;padding:2vh 5vi;text-decoration:none;border:none}li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#111}li[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:block;color:#21c4b6;font-size:100%;text-align:center;padding-top:2vh;margin:0}.logo[_ngcontent-%COMP%]{object-fit:contain;width:100%;height:6vh;-webkit-user-select:none;user-select:none}#home-btn[_ngcontent-%COMP%]{width:20vw}"]})};export{M as a};
